import{a as pe}from"./chunk-FWYR7N2R.js";import{a as ne,c as ie,d as A,e as oe,f as re,i as ae,j,k as L,l as se,v as le}from"./chunk-RQYJ6GMH.js";import{$a as y,Ga as x,Ia as d,Ka as p,La as m,Ma as C,N as J,Na as X,Oa as Z,Pa as q,Qa as ee,S as $,Ua as te,Va as b,W as S,Wa as K,Ya as P,Za as g,ab as D,bb as O,d as G,da as V,db as F,ea as U,eb as R,g as w,gb as T,hb as E,ib as H,ja as Q,ka as Y,ua as u,va as N}from"./chunk-UBMOHPJK.js";var fe=(i,a)=>({"row g-0 mb-2":i,"mb-3":a}),ge=i=>({"col-4":i}),ce=i=>({col:i}),ve=i=>({"order-first":i});function be(i,a){if(i&1&&q(0,6),i&2){b(2);let c=P(5);d("ngTemplateOutlet",c)}}function ye(i,a){if(i&1&&q(0,6),i&2){b(2);let c=P(7);d("ngTemplateOutlet",c)}}function _e(i,a){if(i&1&&(X(0),x(1,be,1,1,"ng-container",5)(2,ye,1,1,"ng-container",5),Z()),i&2){let c=b();u(),d("ngIf",c.input.prefix==null),u(),d("ngIf",c.input.prefix!=null)}}function xe(i,a){if(i&1){let c=ee();p(0,"input",7),T(1,"number"),te("input",function(){V(c);let o=b();return U(o.onInput())})("keydown",function(o){V(c);let e=b();return U(e.keyDown(o))}),m()}if(i&2){let c=b();K("placeholder",c.input.empty),d("ngClass",F(8,ce,c.input.styles=="flex"))("id",c.input.name)("name",c.input.name)("value",E(1,5,c.input.value,"0.0"))}}function Ce(i,a){}function Te(i,a){if(i&1&&(p(0,"div",8),x(1,Ce,0,0,"ng-template",6),p(2,"label",9),g(3),m()()),i&2){let c=b(),t=P(5);d("ngClass",F(5,ce,c.input.styles=="flex")),u(),d("ngTemplateOutlet",t),u(),d("for",c.input.name)("ngClass",F(7,ve,c.input.prefixPos=="start")),u(),y(" ",c.input.prefix," ")}}var B=(()=>{let a=class a{constructor(t){this.el=t}onInput(){let t=this.input,o=this.el.nativeElement.querySelector(`#${t.name}`),e=Number(o.value.replace(/[.]/g,"").replace(",","."));switch(t.typeAs){case"number":t.value=isNaN(e)?void 0:e;break;default:t.value=o.value;break}}keyDown(t){t.key=="."&&(t.preventDefault(),t.target.value+=",")}newString(t="block",o,e){return{name:"newString",label:"New String",empty:"Please provide value...",typeAs:"string",styles:t,prefix:o,prefixPos:e,value:void 0}}newNumber(t="block",o,e){return{name:"",label:"",empty:"0",typeAs:"number",styles:t,prefix:o,prefixPos:e,value:void 0}}};a.\u0275fac=function(o){return new(o||a)(N(Q))},a.\u0275cmp=S({type:a,selectors:[["app-input"]],inputs:{input:"input"},standalone:!0,features:[O],decls:8,vars:10,consts:[["asNumber",""],["numPrefix",""],[1,"align-items-baseline",3,"ngClass"],[1,"fs-5",3,"for","ngClass"],[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],["type","text","inputmode","numeric","autocomplete","off",1,"form-control",3,"input","keydown","ngClass","id","name","value","placeholder"],[1,"d-flex","align-items-baseline","gap-2",3,"ngClass"],[3,"for","ngClass"]],template:function(o,e){o&1&&(p(0,"div",2)(1,"label",3),g(2),m(),x(3,_e,3,2,"ng-container",4),m(),x(4,xe,2,10,"ng-template",null,0,H)(6,Te,4,9,"ng-template",null,1,H)),o&2&&(d("ngClass",R(5,fe,e.input.styles=="flex",e.input.styles=="block")),u(),K("for",e.input.name),d("ngClass",F(8,ge,e.input.styles=="flex")),u(),y(" ",e.input.label," "),u(),d("ngIf",e.input.typeAs=="number"))},dependencies:[L,A,re,ae,j]});let i=a;return i})();var Ee=(i,a)=>({"text-bg-primary":i,"text-bg-danger":a});function Ie(i,a){if(i&1&&(p(0,"li"),C(1,"app-input",22),m()),i&2){let c=a.$implicit;u(),d("input",c)}}function ke(i,a){if(i&1&&(p(0,"li",23)(1,"div",24),C(2,"app-input",22),p(3,"div",25)(4,"div",26),g(5),T(6,"number"),m()()()()),i&2){let c=a.$implicit,t=b();u(2),d("input",c),u(3),y(" Rp ",E(6,2,t.percentValue(c.value),"1.0-0")," ")}}function we(i,a){if(i&1&&(p(0,"li",23)(1,"div",24),C(2,"app-input",22),p(3,"div",25)(4,"div",26),g(5),T(6,"number"),m()()()()),i&2){let c=a.$implicit,t=b();u(2),d("input",c),u(3),y(" Rp/Hari ",E(6,2,t.toDaily(c.value),"1.0-0")," ")}}ie(pe);var W=(()=>{let a=class a{constructor(){this.incomeGroup=[],this.percentGroup=[],this.monthGroup=[],this.defaultFill()}defaultFill(){let t=B.prototype,o=["Penjualan","Lain"],e=["Bahan Baku","Komisi","Lain"],s=["Gaji","Listrik","Wifi","Lain"];o.forEach(r=>{let n=t.newNumber("flex");n.name=r.toLowerCase().replace(" ",""),n.label=r,n.prefix="Rp",n.prefixPos="start",n.empty="total sehari",this.incomeGroup.push(n)}),s.forEach(r=>{let n=t.newNumber("flex");n.name=r.toLowerCase().replace(" ",""),n.label=r,n.prefix="Rp",n.prefixPos="start",n.empty="total sebulan",this.monthGroup.push(n)}),e.forEach(r=>{let n=t.newNumber("flex");n.name=r.toLowerCase().replace(" ",""),n.label=r,n.prefix="%",n.prefixPos="start",n.empty="estimasi",this.percentGroup.push(n)})}totalGroup(t){let o=0;return t.forEach(e=>{let s=Number(e.value);isNaN(s)||(o+=s)}),o}percentValue(t){let e=this.totalGroup(this.incomeGroup)*(t/100);return isNaN(e)?0:e}totalPercentSum(){let t=0;return this.percentGroup.forEach(o=>{t+=this.percentValue(o.value)}),t}toDaily(t){return t/30}totalProfit(){return this.totalGroup(this.incomeGroup)-this.totalPercentSum()-this.toDaily(this.totalGroup(this.monthGroup))}tracker(t,o){return o}};a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=S({type:a,selectors:[["app-profit"]],inputs:{incomeGroup:"incomeGroup",percentGroup:"percentGroup",monthGroup:"monthGroup"},standalone:!0,features:[D([B]),O],decls:46,vars:26,consts:[[1,"container","my-3"],[1,"text-center","mb-3"],[1,"d-grid","justify-content-center"],[1,"row","justify-content-center","mb-3","gap-md-3"],[1,"col-9","col-sm-6","col-md-4","col-lg-8","mb-3"],[1,"border-3","border-success"],[1,"text-center","mb-3","text-success"],[1,"mb-0"],[1,"badge","text-bg-success"],[1,"list-group","list-unstyled"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-9","col-sm-6","col-md-4","col-lg-5","mb-3"],[1,"border-3","border-warning"],[1,"text-center","mb-3","text-warning"],[1,"badge","text-bg-warning"],["class","mb-3",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-3","border-danger"],[1,"text-center","mb-3","text-danger"],[1,"badge","text-bg-danger"],[1,"position-sticky","bottom-0","d-flex","justify-content-center"],[1,"sticky-bottom","rounded",3,"ngClass"],[1,"d-flex","gap-3","p-2","fw-bolder"],[3,"input"],[1,"mb-3"],[1,""],[1,"float-end","small","font-monospace","badge","text-bg-secondary"],[1,"text-end","fst-italic"]],template:function(o,e){o&1&&(p(0,"div",0)(1,"div",1)(2,"h1"),g(3,"Simulasi Profit"),m(),p(4,"h1"),g(5,"Harian"),m()(),p(6,"div",2)(7,"form",3)(8,"div",4),C(9,"hr",5),p(10,"div",6)(11,"h4",7),g(12,"Pendapatan"),m(),p(13,"h5",8),g(14),T(15,"number"),m()(),p(16,"ul",9),x(17,Ie,2,1,"li",10),m()(),p(18,"div",11),C(19,"hr",12),p(20,"div",13)(21,"h4",7),g(22,"Biaya Persen"),m(),p(23,"h5",14),g(24),T(25,"number"),m()(),p(26,"ul",9),x(27,ke,7,5,"li",15),m()(),p(28,"div",11),C(29,"hr",16),p(30,"div",17)(31,"h4",7),g(32,"Biaya Bulanan"),m(),p(33,"h5",18),g(34),T(35,"number"),m()(),p(36,"ul",9),x(37,we,7,5,"li",15),m()()(),p(38,"footer",19)(39,"div",20)(40,"div",21)(41,"div"),g(42,"Laba Bersih"),m(),p(43,"div"),g(44),T(45,"number"),m()()()()()()),o&2&&(u(14),y(" Rp ",E(15,11,e.totalGroup(e.incomeGroup),"1.0-0")," "),u(3),d("ngForOf",e.incomeGroup)("ngForTrackBy",e.tracker),u(7),y(" Rp ",E(25,14,e.totalPercentSum(),"1.0-0")," "),u(3),d("ngForOf",e.percentGroup)("ngForTrackBy",e.tracker),u(7),y(" Rp ",E(35,17,e.toDaily(e.totalGroup(e.monthGroup)),"1.0-0")," "),u(3),d("ngForOf",e.monthGroup)("ngForTrackBy",e.tracker),u(2),d("ngClass",R(23,Ee,e.totalProfit()>=0,e.totalProfit()<0)),u(5),y(" Rp ",E(45,20,e.totalProfit(),"1.0-0")," "))},dependencies:[L,A,oe,j,B]});let i=a;return i})();var ue=(()=>{let a=class a{constructor(t,o){this.document=t,this.http=o,this.eventAfterRender=new Y,this.eventOnLogin=new Y,this.CLIENT_ID="<YOUR_CLIENT_ID>",this.API_KEY="<YOUR_API_KEY>",this.DISCOVERY_DOC="https://sheets.googleapis.com/$discovery/rest?version=v4",this.SCOPES="https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/docs https://www.googleapis.com/auth/userinfo.profile",this.gapiInited=!1,this.gisInited=!1,this.tokenName="gtoken",this.register={OAuth:e=>new Promise((s,r)=>{if(this.gisInited)return s(!0);this.CLIENT_ID=e,this.loadScript("https://accounts.google.com/gsi/client",void 0,void 0,()=>{this.tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.CLIENT_ID,scope:this.SCOPES,callback:""}),this.gisInited=!0,console.log("gis init",!0),s(!0)})}),gapi:(e,s)=>new Promise((r,n)=>{if(this.gapiInited)return r(!0);this.API_KEY=e,this.CLIENT_ID=s,this.loadScript("https://apis.google.com/js/api.js",void 0,void 0,()=>G(this,null,function*(){console.log("await initialize gapi account"),yield gapi.load("client:auth2",function(){gapi.auth2.init({client_id:s})}),console.log("gapi init",!0),this.gapiInited=!0,r(!0)}))})},this.convert={tsvToObj:e=>{let s=[];e.split(`\r
`).forEach(h=>{let f=[];h.split("	").forEach(_=>f.push(_)),s.push(f)});let r=[],n=s[0];return s.filter((h,f)=>f>0).forEach(h=>{let f={};h.forEach((v,_)=>{let l=n[_];f[l]=v}),r.push(f)}),r},listToObj:e=>{let s=e[0],r=[];return e.forEach((n,h)=>{if(h==0)return;let f={};n.forEach((v,_)=>{f[s[_]]=v}),r.push(f)}),r}},this.anon={read:e=>new w(s=>{this.http.get(e,{responseType:"text"}).subscribe(r=>{let n=this.convert.tsvToObj(r);s.next(n),s.complete()})}),create:(e,s)=>{function r(){let l="";return n.forEach(I=>{l+=`${I.name}=${I.value}&`}),l=l.substring(0,l.length-1),l}s.preventDefault();let n=[],h=s.currentTarget;h.querySelectorAll("[name]").forEach(l=>{if(["radio","checkbox"].includes(l.type)&&!l.checked)return;let I={id:l.id,name:l.name,value:l.value};if(l.type=="date"){let k=new Date(l.value);n.push({id:l.id,name:l.name+"_year",value:k.getFullYear()}),n.push({id:l.id,name:l.name+"_month",value:k.getMonth()+1}),n.push({id:l.id,name:l.name+"_day",value:k.getDay()})}else n.push(I)});let v=r(),_=`https://docs.google.com/forms/d/e/${e}/formResponse?${v}&submit=Submit`;h.reset(),this.http.request("GET",_).subscribe()}},this.public={read:(e,s,r)=>{let n=`https://sheets.googleapis.com/v4/spreadsheets/${s}/values/${r}`,h="?valueRenderOption=UNFORMATTED_VALUE&dateTimeRenderOption=FORMATTED_STRING",f=`&key=${e}`,v=this.http.get(n+h+f);return new w(l=>{v.subscribe({next:I=>{let k=I.values,M=this.convert.listToObj(k);l.next(M)},error:()=>{},complete:()=>{l.complete()}})})},readBatch:(e,s,r)=>{let n=`https://sheets.googleapis.com/v4/spreadsheets/${s}/values:batchGet?`;r.forEach(l=>n+="ranges="+l+"&");let h="valueRenderOption=UNFORMATTED_VALUE&dateTimeRenderOption=FORMATTED_STRING",f=`&key=${e}`,v=this.http.get(n+h+f);return new w(l=>{v.subscribe({next:I=>{I.valueRanges.forEach(k=>{let M=k.values,me=/(\w+)[\S]/.exec(k.range)[1],de=this.convert.listToObj(M);l.next({range:me,values:de})})},error:()=>{},complete:()=>l.complete()})})}},this.private={read:(e,s,r,n)=>new w(h=>{this.register.gapi(e,s).then(()=>{this.register.OAuth(s).then(()=>{this.values.get(r,n).subscribe(f=>{h.next(f),h.complete()})})})}),readBatch:(e,s,r,n)=>G(this,null,function*(){return yield this.register.gapi(e,s),gapi.client.sheets.spreadsheets.get({spreadsheetId:r,ranges:n})}),update:()=>{},signin:e=>{this.register.OAuth(e).then(()=>{this.handleAuthClick(s=>{let r=s.access_token;fetch("https://www.googleapis.com/userinfo/v2/me",{headers:{Authorization:`Bearer ${r}`}}).then(n=>n.json()).then(n=>{this.eventOnLogin.emit({type:"login",message:n,result:!0})}).catch(n=>{console.error("Error fetching user profile:",n)})})})}},this.values={get:(e,s)=>new w(r=>{this.handleAuthClick(()=>{gapi.client.sheets.spreadsheets.values.get({spreadsheetId:e,range:s,valueRenderOption:"UNFORMATTED_VALUE",dateTimeRenderOption:"FORMATTED_STRING"},(n,h)=>{if(n)r.error(n);else{let v=h.result.values;console.table(v),r.next(v)}r.complete()})})})}}loadScript(t,o,e,s){let r=this.document.body,n=this.document.createElement("script");n.innerHTML="",n.src=t,e!=null&&(n.crossOrigin=e),o!=null&&(n.integrity=o),n.async=!0,n.defer=!0,n.onload=s,r.appendChild(n)}saveLocalToken(){let t=this.accessToken;localStorage.setItem(this.tokenName,t)}getLocalToken(){return localStorage.getItem(this.tokenName)}handleAuthClick(t,o,e){return G(this,null,function*(){this.tokenClient.error_callback=r=>{throw r},this.tokenClient.callback=r=>G(this,null,function*(){if(r.error!==void 0)throw r;if(this.accessToken=r.access_token,this.saveLocalToken(),typeof t=="function")t(r);else return r});let s="";this.accessToken=this.getLocalToken(),this.accessToken==null?s="consent":s="",this.tokenClient.requestAccessToken({prompt:s})})}handleSignoutClick(){let t=gapi.client.getToken();t!==null&&(google.accounts.oauth2.revoke(t.access_token),gapi.client.setToken(""))}};a.\u0275fac=function(o){return new(o||a)($(ne),$(se))},a.\u0275prov=J({token:a,factory:a.\u0275fac,providedIn:"root"});let i=a;return i})();var qe=(()=>{let a=class a{constructor(t,o){this.app=t,this.sheets=o,this.income=[],this.percent=[],this.monthly=[]}ngOnInit(){this.load()}load(){let t=this.app.auth;this.sheets.public.read(t.api,t.sheetId,"sim").subscribe(o=>{this.income=o.filter(e=>e.group=="pendapatan"),this.percent=o.filter(e=>e.group=="persen"),this.monthly=o.filter(e=>e.group=="bulanan")})}};a.\u0275fac=function(o){return new(o||a)(N(le),N(ue))},a.\u0275cmp=S({type:a,selectors:[["app-calc-profit"]],standalone:!0,features:[D([W]),O],decls:2,vars:3,consts:[[1,"mb-5"],[3,"incomeGroup","percentGroup","monthGroup"]],template:function(o,e){o&1&&(p(0,"div",0),C(1,"app-profit",1),m()),o&2&&(u(),d("incomeGroup",e.income)("percentGroup",e.percent)("monthGroup",e.monthly))},dependencies:[W],styles:[`html,body{width:100vw;height:100vh;position:relative;overflow:auto}.form-control{border-top:0;border-inline:0;border-radius:0;background-color:#4d4d4d80}.form-control::placeholder{font-style:italic;font-family:monospace;font-size:smaller}
`],encapsulation:2});let i=a;return i})();export{qe as CalcProfitComponent};
